# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ `handlers/photo.py`
2. **–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª** `logs/bot.log`
3. **DEBUG —Å–æ–æ–±—â–µ–Ω–∏—è** - –±–æ—Ç —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–æ—Ç–æ

## –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@server

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –±–æ—Ç–∞
cd /path/to/pride34_gift_bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ systemd)
sudo systemctl stop pride34_bot

# –ò–õ–ò –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ screen/tmux
screen -r bot  # –∏–ª–∏ tmux attach -t bot
# –ù–∞–∂–∞—Ç—å Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull origin main

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å–Ω–æ–≤–∞
sudo systemctl start pride34_bot
# –ò–õ–ò
screen -S bot -dm python main.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp handlers/photo.py user@server:/path/to/pride34_gift_bot/handlers/
scp main.py user@server:/path/to/pride34_gift_bot/
```

–ó–∞—Ç–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞.

## –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ï—Å–ª–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ systemd:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ systemd
sudo journalctl -u pride34_bot -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤ –±–æ—Ç–∞
tail -f /path/to/pride34_gift_bot/logs/bot.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
tail -100 /path/to/pride34_gift_bot/logs/bot.log
```

### –ï—Å–ª–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ screen/tmux:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ screen —Å–µ—Å—Å–∏–∏
screen -r bot

# –ò–ª–∏ –∫ tmux —Å–µ—Å—Å–∏–∏
tmux attach -t bot

# –î–ª—è –≤—ã—Ö–æ–¥–∞ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞: Ctrl+A, D (screen) –∏–ª–∏ Ctrl+B, D (tmux)
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–æ–≤:

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±–æ—Ç–∞
cd /path/to/pride34_gift_bot

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
python view_logs.py 100

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ tail
tail -100 logs/bot.log

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/bot.log
```

## –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ —Ñ–æ—Ç–æ –≤ –±–æ—Ç–∞, –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:

```
2025-12-29 XX:XX:XX - handlers.photo - INFO - üì∏ PHOTO HANDLER: Started for user 123456
2025-12-29 XX:XX:XX - handlers.photo - INFO - üì∏ PHOTO HANDLER: Current state = QuizStates:waiting_for_photo
2025-12-29 XX:XX:XX - handlers.photo - INFO - üì∏ PHOTO HANDLER: Got photo file_id: xxxxx
2025-12-29 XX:XX:XX - handlers.photo - INFO - üì∏ PHOTO HANDLER: Downloading to user_photos/123456.jpg
...
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
3. **–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram**
4. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ**

**–¢–µ–ø–µ—Ä—å –±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å:**
```
üîß DEBUG: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—É—â–µ–Ω (state: QuizStates:waiting_for_photo)
```

–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç!

5. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
tail -50 /path/to/pride34_gift_bot/logs/bot.log
```

## –ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç "üîß DEBUG: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—É—â–µ–Ω...", –∑–Ω–∞—á–∏—Ç:

1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å–æ state** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `waiting_for_photo`
   - –†–µ—à–µ–Ω–∏–µ: –ó–∞–Ω–æ–≤–æ –ø—Ä–æ–π—Ç–∏ –∫–≤–∏–∑ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞

2. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª, –∞ –Ω–µ —Ñ–æ—Ç–æ**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∏–º–µ–Ω–Ω–æ —Ñ–æ—Ç–æ (–Ω–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ —Ñ–∞–π–ª")

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ, –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±–æ—Ç–∞
python check_bot_handlers.py
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```bash
python test_photo_handler.py
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ª–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏:

```bash
grep "ERROR\|‚ùå" logs/bot.log
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
grep "user 123456" logs/bot.log
```

## –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤:

```bash
tail -50 /path/to/pride34_gift_bot/logs/bot.log
```
