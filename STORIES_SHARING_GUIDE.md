# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Stories

## –û–±–∑–æ—Ä

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∫–∏ –≤ Stories Instagram, VK –∏ Telegram —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç:

1. **üì∏ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Instagram Stories**
2. **üì± –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ VK Stories**
3. **‚úàÔ∏è –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Telegram Stories** (—Ç–æ–ª—å–∫–æ –¥–ª—è Premium)
4. **üéÅ –†–∞—Å—Å–∫–∞–∑–∞—Ç—å –¥—Ä—É–∑—å—è–º** (inline mode)

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø

–ü—Ä—è–º–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Stories –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π API —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π. –ü–æ—ç—Ç–æ–º—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω user-friendly –ø–æ–¥—Ö–æ–¥:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É Stories (Instagram/VK/Telegram)
2. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∫—É –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –µ—ë –≤—Ä—É—á–Ω—É—é

### Instagram Stories

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**

```
üì∏ –ö–∞–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Instagram Stories:

1Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Ñ–æ—Ç–æ ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å)
2Ô∏è‚É£ –û—Ç–∫—Ä–æ–π—Ç–µ Instagram
3Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ ‚ûï ‚Üí –ò—Å—Ç–æ—Ä–∏—è
4Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É
5Ô∏è‚É£ –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–∏–∫–µ—Ä "–°—Å—ã–ª–∫–∞" –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:
https://t.me/PRIDE34_GIFT_BOT?start=ref123456

6Ô∏è‚É£ –û–ø—É–±–ª–∏–∫—É–π—Ç–µ! üéâ

–í–∞—à–∏ –¥—Ä—É–∑—å—è —Å–º–æ–≥—É—Ç –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –∏ –ø—Ä–æ–π—Ç–∏ –∫–≤–∏–∑
```

**Callback:** `share_instagram_{user_id}`

### VK Stories

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**

```
üì± –ö–∞–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ VK Stories:

1Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Ñ–æ—Ç–æ ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å)
2Ô∏è‚É£ –û—Ç–∫—Ä–æ–π—Ç–µ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
3Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞–º–µ—Ä—É (—Å–æ–∑–¥–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é)
4Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É
5Ô∏è‚É£ –î–æ–±–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Ç–∏–∫–µ—Ä "–°—Å—ã–ª–∫–∞" –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:
https://t.me/PRIDE34_GIFT_BOT?start=ref123456

6Ô∏è‚É£ –û–ø—É–±–ª–∏–∫—É–π—Ç–µ! üéâ

–í–∞—à–∏ –¥—Ä—É–∑—å—è —Å–º–æ–≥—É—Ç –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –∏ –ø—Ä–æ–π—Ç–∏ –∫–≤–∏–∑
```

**Callback:** `share_vk_{user_id}`

### Telegram Stories (Premium only)

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:**

```
‚úàÔ∏è –ö–∞–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Telegram Stories:

1Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ç–∫—Ä—ã—Ç–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Ñ–æ—Ç–æ ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å)
2Ô∏è‚É£ –í Telegram –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–ú–æ—è –∏—Å—Ç–æ—Ä–∏—è"
3Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ ‚ûï (–¥–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é)
4Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É
5Ô∏è‚É£ –î–æ–±–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π:
https://t.me/PRIDE34_GIFT_BOT?start=ref123456

6Ô∏è‚É£ –û–ø—É–±–ª–∏–∫—É–π—Ç–µ! üéâ

–í–∞—à–∏ –¥—Ä—É–∑—å—è —Å–º–æ–≥—É—Ç –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –∏ –ø—Ä–æ–π—Ç–∏ –∫–≤–∏–∑
```

**Callback:** `share_tg_story_{user_id}`

**–ü—Ä–æ–≤–µ—Ä–∫–∞ Premium:**
```python
if not callback.from_user.is_premium:
    await callback.answer(
        "–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è Telegram Premium –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤",
        show_alert=True
    )
    return
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã

**bot/keyboards.py**
- `get_share_keyboard()` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å 4 –∫–Ω–æ–ø–∫–∞–º–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `bot_username` - –∏–º—è –±–æ—Ç–∞ –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
  - `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `has_premium` - —Ñ–ª–∞–≥ Premium —Å—Ç–∞—Ç—É—Å–∞
  - `image_file_id` - file_id –æ—Ç–∫—Ä—ã—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**handlers/photo.py**
- `handle_instagram_story_share()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Instagram Stories
- `handle_vk_story_share()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ VK Stories
- `handle_telegram_story_share()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Telegram Stories

### –§–æ—Ä–º–∞—Ç callback_data

```python
# Instagram
callback_data=f"share_instagram_{user_id}"

# VK
callback_data=f"share_vk_{user_id}"

# Telegram Stories
callback_data=f"share_tg_story_{user_id}"
```

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```python
from database.crud import UserCRUD
referral_link = UserCRUD.generate_referral_link(bot_username, user_id)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: https://t.me/PRIDE34_GIFT_BOT?start=ref123456
```

## User Flow

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π (Instagram Stories)

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª –∫–≤–∏–∑** ‚Üí –ø–æ–ª—É—á–∏–ª –æ—Ç–∫—Ä—ã—Ç–∫—É
2. **–í–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É** "üì∏ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Instagram Stories"
3. **–ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É** ‚Üí –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∫—É** –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ —Ñ–æ—Ç–æ)
5. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç Instagram** ‚Üí —Å–æ–∑–¥–∞—ë—Ç Story
6. **–í—ã–±–∏—Ä–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∫—É** –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
7. **–î–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç–∏–∫–µ—Ä "–°—Å—ã–ª–∫–∞"** ‚Üí –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
8. **–ü—É–±–ª–∏–∫—É–µ—Ç Story** ‚Üí –¥—Ä—É–∑—å—è –≤–∏–¥—è—Ç –æ—Ç–∫—Ä—ã—Ç–∫—É —Å —Å—Å—ã–ª–∫–æ–π
9. **–î—Ä—É–∑—å—è –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –ø–æ —Å—Å—ã–ª–∫–µ** ‚Üí –Ω–∞—á–∏–Ω–∞—é—Ç –∫–≤–∏–∑ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `referrer_id`

### –°—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è Premium (Telegram Stories)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "‚úàÔ∏è –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Telegram Stories"
2. **–ï—Å–ª–∏ –Ω–µ Premium** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è alert "–§—É–Ω–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è Premium"
3. **–ï—Å–ª–∏ Premium** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
4. –î–∞–ª—å—à–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Instagram Stories

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π UX –¥–ª—è Instagram, VK, Telegram

### ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- –ö–∞–∂–¥–∞—è —Å—Å—ã–ª–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ù–µ –Ω—É–∂–Ω—ã —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞ –∫ Instagram/VK

### ‚úÖ User-friendly
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –ì–æ—Ç–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–≤ —Ç–µ–≥–∞—Ö `<code>`)

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

### ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è** - API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏–∑ –±–æ—Ç–æ–≤
2. **–ü—Ä—è–º–æ–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π** - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ stories

### ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ –≤ –±—É–¥—É—â–µ–º

1. **Deep links –¥–ª—è Instagram:**
   ```
   instagram-stories://share
   ```
   –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ iOS/Android —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

2. **VK Share API:**
   ```
   https://vk.com/share.php?url=...&image=...
   ```
   –ù–æ –Ω–µ –¥–ª—è Stories, —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ—Å—Ç–æ–≤

3. **Telegram Web App:**
   –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Web App –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:

1. **–ö–ª–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ Stories** (—á–µ—Ä–µ–∑ callback_query –ª–æ–≥–∏)
2. **–ü–µ—Ä–µ—Ö–æ–¥—ã –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º —Å—Å—ã–ª–∫–∞–º** (—á–µ—Ä–µ–∑ `/start ref{id}`)
3. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** (% –¥–æ—à–µ–¥—à–∏—Ö –¥–æ –æ—Ç–∫—Ä—ã—Ç–∫–∏)

### SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–ª–∏–∫–∞–º –Ω–∞ Stories:**
```sql
-- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É story_shares
SELECT user_id, platform, COUNT(*) as clicks
FROM story_shares
WHERE created_at > datetime('now', '-7 days')
GROUP BY user_id, platform
ORDER BY clicks DESC
LIMIT 10;
```

**–ö–æ–Ω–≤–µ—Ä—Å–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:**
```sql
SELECT
    COUNT(DISTINCT referrer_id) as total_referrers,
    COUNT(*) as total_referrals,
    COUNT(*) * 100.0 / COUNT(DISTINCT referrer_id) as avg_per_referrer
FROM users
WHERE referrer_id IS NOT NULL;
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–ª—è Instagram Stories

1. **–•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç–∫–∏** - –Ω–µ —Å–∂–∏–º–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. **–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Å—Å—ã–ª–∫—É –≤–≤–µ—Ä—Ö—É** - —á—Ç–æ–±—ã –±—ã–ª–∞ –≤–∏–¥–Ω–∞ —Å—Ä–∞–∑—É
3. **–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é** - "–ü—Ä–æ–π–¥–∏ –∫–≤–∏–∑ –ø–æ —Å—Å—ã–ª–∫–µ!"
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ö–µ—à—Ç–µ–≥–∏** - #PRIDEFitness–ö–≤–∏–∑

### –î–ª—è VK Stories

1. **–¢–µ–∫—Å—Ç –ø–æ–≤–µ—Ä—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - VK –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞
2. **–°—Ç–∏–∫–µ—Ä—ã –∏ —ç–º–æ–¥–∑–∏** - –¥–µ–ª–∞—é—Ç –∏—Å—Ç–æ—Ä–∏—é –∑–∞–º–µ—Ç–Ω–µ–µ
3. **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è** - –µ—Å–ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ (PRIDE –∫–ª—É–±)

### –î–ª—è Telegram Stories

1. **–¢–æ–ª—å–∫–æ –¥–ª—è Premium** - –æ–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Premium
2. **–°—Å—ã–ª–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã** - –≤ Telegram —Å—Å—ã–ª–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ
3. **–í–∏–¥–∏–º–æ—Å—Ç—å 48 —á–∞—Å–æ–≤** - –∏—Å—Ç–æ—Ä–∏—è –∂–∏–≤—ë—Ç –¥–æ–ª—å—à–µ —á–µ–º –≤ –¥—Ä—É–≥–∏—Ö —Å–µ—Ç—è—Ö

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Checklist –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] Instagram Stories –∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] VK Stories –∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] Telegram Stories –∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Premium
- [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (—Ñ–æ—Ä–º–∞—Ç `?start=ref{id}`)
- [ ] –°—Å—ã–ª–∫–∞ –≤ —Ç–µ–≥–∞—Ö `<code>` (–ª–µ–≥–∫–æ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è)
- [ ] Non-Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç alert –¥–ª—è Telegram Stories
- [ ] –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –º–µ–Ω—é ("–ù–∞–∑–∞–¥")

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: Instagram Stories (–æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
1. –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑ –¥–æ –∫–æ–Ω—Ü–∞
2. –ù–∞–∂–∞—Ç—å "üì∏ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Instagram Stories"
3. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: Telegram Stories (Premium)**
1. –í–æ–π—Ç–∏ —Å Premium –∞–∫–∫–∞—É–Ω—Ç–æ–º
2. –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑ –¥–æ –∫–æ–Ω—Ü–∞
3. –ù–∞–∂–∞—Ç—å "‚úàÔ∏è –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Telegram Stories"
4. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: Telegram Stories (–Ω–µ Premium)**
1. –í–æ–π—Ç–∏ —Å –æ–±—ã—á–Ω—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º
2. –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑ –¥–æ –∫–æ–Ω—Ü–∞
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–Ω–æ–ø–∫–∞ Telegram Stories –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

## Changelog

### v1.0 (2024-12-29)

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üì∏ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Instagram Stories"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üì± –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ VK Stories"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚úàÔ∏è –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ Telegram Stories" (Premium)
- ‚úÖ –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Premium —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è Telegram Stories

## FAQ

**Q: –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏?**

A: Instagram, VK –∏ Telegram –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø—É–±–ª–∏—á–Ω–æ–µ API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Stories –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–æ—Ç–æ–≤. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫—Ç–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –≤ Stories?**

A: –ù–∞–ø—Ä—è–º—É—é –Ω–µ—Ç. –ù–æ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∫–ª–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ Stories –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º —Å—Å—ã–ª–∫–∞–º. –ï—Å–ª–∏ –¥—Ä—É–≥ –ø–µ—Ä–µ—à—ë–ª –ø–æ —Å—Å—ã–ª–∫–µ ‚Üí –∑–Ω–∞—á–∏—Ç Stories –±—ã–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞.

**Q: –ü–æ—á–µ–º—É Telegram Stories —Ç–æ–ª—å–∫–æ –¥–ª—è Premium?**

A: Stories –≤ Telegram - —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞—è —Ç–æ–ª—å–∫–æ Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å Stories.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —Å–æ—Ü—Å–µ—Ç–∏?**

A: –î–∞, –ø—Ä–∏–Ω—Ü–∏–ø —Ç–æ—Ç –∂–µ:
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ `get_share_keyboard()`
- –°–æ–∑–¥–∞—Ç—å callback handler –≤ `handlers/photo.py`
- –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ü—Ä–∏–º–µ—Ä—ã: Twitter/X, Facebook Stories, Snapchat, TikTok.

**Q: –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –≤ Stories?**

A: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (–≥–∏—Ñ–∫–∞ –∏–ª–∏ –≤–∏–¥–µ–æ)
2. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–π Story
3. –î–æ–±–∞–≤–∏—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏—é (–±–æ–Ω—É—Å—ã –∑–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é)
4. Gamification - –±–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é
